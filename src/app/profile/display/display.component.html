<div class="container  ">
  <div class="d-flex justify-content-center pt-4 ">
    <div class="d-flex w-100 flex-column flex-md-row align-items-center gap-4">
      <!-- Profile Image -->
      <div>
        <img [src]="avatarUrl"  data-bs-toggle="modal" data-bs-target="#profileModal"  alt="Profile" class="rounded-circle border"
          style="width: 120px; height: 120px; object-fit: cover;">
      </div>

      <!-- Profile Info -->
      <div class="flex-grow-1 ms-md-5 text-center text-md-start">
        <!-- Username + Edit -->
        <div class="d-flex align-items-center justify-content-center justify-content-md-start mb-3 flex-wrap gap-2">
          <h3 class="mb-0 me-2">{{ username }}</h3>
          <button class="btn btn-outline-secondary btn-sm" routerLink="/accounts/edit-profile">Edit Profile</button>
        </div>

        <!-- Stats -->
        <div class="d-flex justify-content-center justify-content-md-start gap-5 mb-3">
          <span><strong>{{ numberposts }}</strong> <span style="color: rgb(172, 172, 172);"> posts</span></span>
          <span><strong>{{ followers }}</strong> <span style="color: rgb(172, 172, 172); cursor: pointer;"> followers</span></span>
          <span><strong>{{ following }}</strong> <span style="color: rgb(172, 172, 172); cursor: pointer;"> following</span></span>
        </div>

       <!-- Bio -->
        <div style=" word-wrap: break-word; overflow-wrap: break-word; max-height: 200px; overflow: auto;">
          <p class="fs-5">{{ fullname }}</p>
          <span [innerText]="bio"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="my-4"> </div>

  <!-- New Post Section --> 
    <div class="d-flex mt-5 justify-content-start align-items-center w-100" style="max-width: 800px;">
      <div class="me-3">
        <img [src]="plusIconUrl" alt="Add Post"
          style="width: 80px; height: 80px; border-radius: 50%;">
      </div>
      
    </div> 

    

    <!-- Tabs -->
<ul class="nav justify-content-center   py-2">
  <li class="nav-item">
    <a class="nav-link text-white" [ngClass]="{active: activeTab === 'posts'}" (click)="activeTab = 'posts'">
      <i class="fa-solid fa-table-cells"></i> POSTS
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link text-white" [ngClass]="{active: activeTab === 'saved'}" routerLink="/{{username}}/saved" >
      <i class="fa-solid fa-bookmark"></i> SAVED
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link text-white" [ngClass]="{active: activeTab === 'tagged'}"  routerLink="/{{username}}/tagged"  >
      <i class="fa-solid fa-user-tag"></i> TAGGED
    </a>
  </li>
</ul>

<!-- Posts Grid -->
<div class="container mt-3">
  <div *ngIf="activeTab === 'posts'" class="row g-2">
    <div class="col-12 col-sm-6 col-md-4" *ngFor="let post of fullDetailPost">
  <div class="post-wrapper position-relative">
    <img [src]="post.imageUrl" alt="Post" class="w-100 h-100 postimage" />
    
    <!-- Overlay -->
    <div class="overlay d-flex justify-content-center align-items-center">
      <div class="text-white d-flex gap-3 fs-5 fw-bold">
        <span><i class="fas fa-heart"></i> {{ post.likesCount }}</span>
        <span><i class="fas fa-comment"></i> {{ post.commentsCount }}</span>
      </div>
    </div>
  </div>
</div>

  </div>  
  <div *ngIf="!isPostAvailable" class="text-center py-2 " >
    <i class="fa-solid fs-1 fa-table-cells"></i>
    <p class="fw-bold fs-2" >Share Photos</p>
    <p> When you share photos, they will appear on your profile.</p> 

    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createModal"  >Share your first photo</button>
  </div>

</div>

<!-- Bootstrap profile Modal -->
<div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center " style="background-color: rgb(38, 38, 38);">
      <div class="modal-header border-0">
        <h5 class="modal-title w-100" id="profileModalLabel">Change Profile Photo</h5>
      </div>
      <div class="modal-body p-0">
        <button class="btn w-100 text-primary fw-bold border-top" (click)="triggerFileInput()">Upload Photo</button>
        <button class="btn w-100 text-danger border-top" (click)="removePhoto()">Remove Current Photo</button>
        <button class="btn w-100 border-top text-white" #closeModal data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

 

<input type="file" accept="image/*" style="display:none" #fileInput (change)="handleFileUpload($event)" /> 